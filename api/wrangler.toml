# api/wrangler.toml
name = "saas-api"
main = "src/index.ts"
compatibility_date = "2024-10-01"
workers_dev = true
minify = true
legacy_env = false  # env継承を明示OFF

# --- KV（本番・プレビュー） ---
[[kv_namespaces]]
binding    = "LINE_BOOKING"
id         = "22103efd0bd04365a2ec050a24b3dbc4"   # ← LINE_BOOKING（本番）
preview_id = "03bbf9082957456cb4c18159d6788808"   # ← LINE_BOOKING_preview

# --- Durable Object ---
[[durable_objects.bindings]]
name = "SLOT_LOCK"
class_name = "SlotLock"

# 既存スクリプトに合わせる（そのまま）
[[migrations]]
tag = "v3-slot-lock"
new_classes = ["SlotLock"]

[vars]
BASE_URL = "https://saas-api.hekujiincun.workers.dev"
