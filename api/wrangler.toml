name = "saas-api"
main = "src/index.ts"
compatibility_date = "2024-09-30"
workers_dev = true
observability = { enabled = true }

[durable_objects]
bindings = [{ name = "SLOT_LOCK", class_name = "SlotLock" }]

# ここに "LINE_BOOKING" の実IDを入れる
[[kv_namespaces]]
binding = "LINE_BOOKING"
id = "22103efd0bd04365a2ec050a24b3dbc4" # ← Namespace ID

[[migrations]]
tag = "v3-slot-lock"
new_classes = ["SlotLock"]

# （環境分けしたい場合）
[env.staging]
[[env.staging.kv_namespaces]]
binding = "LINE_BOOKING"
id = "22103efd0bd04365a2ec050a24b3dbc4" # STG 用ID

[env.production]
[[env.production.kv_namespaces]]
binding = "LINE_BOOKING"
id = "22103efd0bd04365a2ec050a24b3dbc4" # PRD 用ID
